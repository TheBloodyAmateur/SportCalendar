<!DOCTYPE html>
<html>
<head>
    <title>Sportradar</title>
    <meta charset="UTF-8">
    <script>
      
      let dataSend = [];

      const ws = new WebSocket("ws://localhost:8080");

      ws.addEventListener("open", () => {
          console.log("Connection established!");
      });
      ws.addEventListener("message", function(event){
          console.log('Message from server: ' + event.data);
      });
      ws.onmessage = function(e){
          var server_message = e.data;
          console.log(server_message);
      }

      function addNewEvent()
      {
        const value = [];
        const cell = [];

        var table = document.getElementsByTagName('table')[0];
        var newRow = table.insertRow(table.rows.length);

        value[0] = document.getElementById("weekday").value;
        value[1] = document.getElementById("date").value;
        value[2] = document.getElementById("sport").value;
        value[3] = document.getElementById("Teams").value;
        value[4] = document.getElementById("location").value;

        ws.send(JSON.stringify([value[0], value[1], value[2], value[3], value[4]]));
      
        //Create new rows 
        for(let i = 0; i < value.length; i++)
        {
          cell[i] = newRow.insertCell(i);
        }

        //Assign values to the new rows
        for(let i = 0; i < value.length; i++)
        {
          cell[i].innerHTML = value[i];
        }
      }

      function sortBy(){
        //Send the column by which the data should be sorted
        var selectValue = document.getElementById("sortMenu").value;
        ws.send(JSON.stringify([selectValue]));

        const cell = [];

        var table = document.getElementsByTagName('table')[0];
        var newRow = table.insertRow(table.rows.length);


      }

    </script>
    <style>
      table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
      }

      td, th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
      }

      tr:nth-child(even) {
        background-color: #dddddd;
      }
    </style>
</head>
<body>
  <h1 style="size: 40px;">Sportradar</h1>
  <div>
    <select id="sortMenu">
        <option value="weekday">Week day</option>
        <option value="date_time">Date</option>
        <option value="sport_type">Sport</option>
        <option value="teams">Teams</option>
        <option value="location">Location</option>
    </select>
    <button onclick="sortBy();">Load Events</button><br/><br/>
  </div>
  <div id="data">
      <input type="text" id="weekday" placeholder="Weekday">
      <input type="text" id="date" placeholder="Date">
      <input type="text" id="sport" placeholder="sport">
      <input type="text" id="Teams" placeholder="Teams">
      <input type="text" id="location" placeholder="Location">
      <button onclick="addNewEvent();">Add Event</button><br/><br/>
  </div>
  <table>
      <tr>
          <th>Week Day</th>
          <th>date</th>
          <th>sport</th>
          <th>Teams</th>
          <th>Country</th>
      </tr>
  </table>
</body>
</html>